{"remainingRequest":"F:\\nodejs\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\edplus\\Vue-日期选择组件\\DatePicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\edplus\\Vue-日期选择组件\\DatePicker.vue","mtime":1616141924876},{"path":"F:\\nodejs\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\nodejs\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\nodejs\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAvLyDoh6rlrprkuYnmjIfku6QKICBkaXJlY3RpdmVzOiB7CiAgICAiY2xpY2stb3V0c2lkZSI6IHsKICAgICAgLy8g5Y+q6LCD55So5LiA5qyh77yM5oyH5Luk56ys5LiA5qyh57uR5a6a5Yiw5YWD57Sg5pe26LCD55So44CC5Zyo6L+Z6YeM5Y+v5Lul6L+b6KGM5LiA5qyh5oCn55qE5Yid5aeL5YyW6K6+572u44CCCiAgICAgIC8vIGVsKOaMh+S7pOaJgOe7keWumueahOWFg+e0oO+8jOWPr+S7peeUqOadpeebtOaOpeaTjeS9nERPTSktLS0tPuS4uumSqeWtkOWHveaVsOeahOWPguaVsAogICAgICAvLyB2bm9kZS0tLShWdWUg57yW6K+R55Sf5oiQ55qE6Jma5ouf6IqC54K5KQogICAgICBiaW5kKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgICAgIGNvbnN0IHZtID0gdm5vZGUuY29udGV4dDsKCiAgICAgICAgZG9jdW1lbnQub25jbGljayA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIGNvbnN0IGRvbSA9IGUudGFyZ2V0OwogICAgICAgICAgLy8gY29uc29sZS5sb2coZG9tICxlbCk7CgogICAgICAgICAgLy9jb250YWlucyBlbOmHjOmdouaYr+WQpuWMheWQq+S6hmRvbSDov5Tlm57lgLxCb29sZWFu5YC8CiAgICAgICAgICBjb25zdCBpc1NvbiA9IGVsLmNvbnRhaW5zKGRvbSk7CgogICAgICAgICAgaWYgKGlzU29uICYmICF2bS5zaG93UGFuZWwpIHsKICAgICAgICAgICAgdm0uY2hhbmdQYW5lbCh0cnVlKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU29uICYmIHZtLnNob3dQYW5lbCkgewogICAgICAgICAgICB2bS5jaGFuZ1BhbmVsKGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSwKICAvL21vZGVs6YCJ6aG5CiAgbW9kZWw6ewogICAgLy8g57uR5a6a6YCJ6aG554m55oCn55qE5ZCN5a2XCiAgICBwcm9wOidkYXRlcycsCiAgICAvL+ebkeWQrOS6i+S7tueahOWQjeWtlwogICAgZXZlbnQ6J2Nob29zZS1kYXRlcycsCgogIH0sCiAgcHJvcHM6IHsKICAgIGRhdGU6IHsKICAgICAgdHlwZTogRGF0ZSwKICAgICAgZGVmYXVsdDogKCkgPT4gbmV3IERhdGUoKQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dQYW5lbDogZmFsc2UsCiAgICAgIHNob3dEYXRlOiB7CiAgICAgICAgeWVhcjogMCwKICAgICAgICBtb250aDogMCwKICAgICAgICBkYXk6IDAKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nUGFuZWwoZmxhZykgewogICAgICB0aGlzLnNob3dQYW5lbCA9IGZsYWc7CiAgICB9LAogICAgLy/liJ3lp4vljJZzaG93RGF0ZeeahOW5tOaciOaXpQogICAgZ2V0U2hvd0RhdGUoZGF0ZSkgewogICAgICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXkgfSA9IHRoaXMuZ2V0WWVhck1vbnRoRGF5KGRhdGUpOwoKICAgICAgdGhpcy5zaG93RGF0ZSA9IHsKICAgICAgICB5ZWFyLAogICAgICAgIG1vbnRoLAogICAgICAgIGRheQogICAgICB9OwogICAgfSwKICAgIC8vIOWwgeijheWHveaVsAogICAgZ2V0WWVhck1vbnRoRGF5KGRhdGUpIHsKICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7CiAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICByZXR1cm4gewogICAgICAgIHllYXIsCiAgICAgICAgbW9udGgsCiAgICAgICAgZGF5CiAgICAgIH07CiAgICB9LAogICAgLy/kuIrkuKrmnIjkuIvkuKrmnIjlpKnmlbDpopzoibLlj5jmtYUKICAgIGlzQ3VyKGRhdGUpIHsKICAgICAgY29uc3QgY2hvb3NlRGF0ZT1uZXcgRGF0ZSh0aGlzLmNob29zZURhdGUpOwogICAgICBjb25zdHt5ZWFyOmNob29zZVllYXIsbW9udGg6Y2hvb3NlTW9udGgsZGF5OmNob29zZURheX09dGhpcy5nZXRZZWFyTW9udGhEYXkoY2hvb3NlRGF0ZSk7CiAgICAgIC8vIOW9k+WkqeeahOW5tCDmnIgg5pelCiAgICAgIGNvbnN0e3llYXI6Y3VyWWVhcixtb250aDpjdXJNb250aCxkYXk6Y3VyRGF5fT10aGlzLmdldFllYXJNb250aERheShuZXcgRGF0ZSgpKTsKICAgICAgLy8g6L+Z5Liq5pyI55qE5bm0IOaciAogICAgICBjb25zdCB7IHllYXI6IHNob3dZZWFyLCBtb250aDogc2hvd01vbnRoIH0gPSB0aGlzLnNob3dEYXRlOwogICAgICAvL2ZvcuW+queOr+mHjOmdoueahOW5tOaciOaXpQogICAgICBjb25zdCB7IHllYXIsIG1vbnRoLGRheSB9ID0gdGhpcy5nZXRZZWFyTW9udGhEYXkoZGF0ZSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgbW9udGg6IHllYXIgPT0gc2hvd1llYXIgJiYgbW9udGggPT0gc2hvd01vbnRoLAogICAgICAgIHNlbGVjdDp5ZWFyID09IGNob29zZVllYXIgJiYgbW9udGggPT0gY2hvb3NlTW9udGggJiYgZGF5PT1jaG9vc2VEYXksCiAgICAgICAgdG9kYXk6eWVhciA9PSBjdXJZZWFyICYmIG1vbnRoID09IGN1ck1vbnRoICYmIGRheT09Y3VyRGF5LAogICAgICB9OwogICAgfSwKICAgIC8vIOeCueWHu+aXpeacnwogICAgb25jaG9vc2VDbGljayhkYXRlKXsKICAgICAgY29uc29sZS5sb2coImNob29zZUNsaWNrLS0tLSIrZGF0ZSkKICAgICAgdGhpcy4kZW1pdCgiY2hvb3NlLWRhdGVzIixkYXRlcyk7IC8v6Ieq5a6a5LmJ5LqL5Lu2IOWtkOe7hOS7tuWQkeeItue7hOS7tuS8oOmAkuaVsOaNrgogICAgICB0aGlzLmNoYW5nUGFuZWwoZmFsc2UpOy8v5YWz6Zet5pel5pyfCiAgICAgIHRoaXMuZ2V0U2hvd0RhdGUoZGF0ZSk7CiAgICB9LAogICAgLy8g54K55Ye75Y2V566t5aS0LS0t5YiH5o2i5pyI5Lu9CiAgICBvbkNoYW5nZU1vbnRoKHR5cGUpewogICAgICBjb25zdCBtb3ZlTW9udGggPSB0eXBlID09PSdwcmV2JyA/IC0xIDogMTsKICAgICAgY29uc3Qge3llYXIsbW9udGgsZGF5fT10aGlzLnNob3dEYXRlOwogICAgICBjb25zdCBzaG93RGF0ZXM9bmV3IERhdGUoeWVhcixtb250aCxkYXkpOwogICAgICAvLyDliKnnlKhuZXdEYXRlKCnph4zpnaLnmoTmlrnms5VzZXRNb3Ro5L+u5pS55pyI5Lu9CiAgICAgIHNob3dEYXRlcy5zZXRNb250aChtb250aCttb3ZlTW9udGgpOwogICAgICBjb25zdCB7eWVhcjpzaG93WWVhcixtb250aDpzaG93TW9udGh9PXRoaXMuZ2V0WWVhck1vbnRoRGF5KHNob3dEYXRlcyk7CiAgICAgIHRoaXMuc2hvd0RhdGUueWVhcj1zaG93WWVhcjsKICAgICAgdGhpcy5zaG93RGF0ZS5tb250aD1zaG93TW9udGg7CiAgICB9LAogICAgLy8g54K55Ye75Y+M566t5aS0IC0tLeWIh+aNouW5tOS7vQogICAgb25DaGFuZ2VZZWFyKHR5cGUpewogICAgICBjb25zdCBtb3ZleWVhcj10eXBlPT0ncHJldic/LTE6MTsKICAgICAgdGhpcy5zaG93RGF0ZS55ZWFyKz1tb3ZleWVhcjsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvL2lucHV05qGGIOm7mOiupOaYvuekuuS7iuWkqQogICAgY2hvb3NlRGF0ZSgpIHsKICAgICAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSB0aGlzLmdldFllYXJNb250aERheSh0aGlzLmRhdGUpOwoKICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGggKyAxfS0ke2RheX1gOwogICAgfSwKICAgIC8v5pi+56S65aSp5pWw77yI5LiK5Liq5pyI77yM6L+Z5Liq5pyI77yM5LiL5Liq5pyI77yJCiAgICBzaG93RGF5KCkgewogICAgICBjb25zdCB7IHllYXIsIG1vbnRoIH0gPSB0aGlzLnNob3dEYXRlOwogICAgICBjb25zdCBmaXJzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKTsKICAgICAgY29uc3Qgd2VlayA9IGZpcnN0RGF5LmdldERheSgpOyAvL+esrOS4gOWkqeaYr+WRqOWHoAogICAgICAvL+S4iuS4quaciOWHoOWPtwogICAgICBjb25zdCBzdGFydERheSA9IGZpcnN0RGF5IC0gd2VlayAqIDI0ICogNjAgKiA2MCAqIDEwMDA7CiAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgIC8vIOS4gOWkqeeahOavq+enkuaVsCAtLS0+IDI0KjYwKjYwKjEwMDAKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0MjsgaSsrKSB7CiAgICAgICAgLy8gIOS7juS4iuS4quaciOWHoOWPt+W8gOWni+mBjeWOhiDnm7TliLA0MuS4quepuuS9jeWujAogICAgICAgIGFyci5wdXNoKG5ldyBEYXRlKHN0YXJ0RGF5ICsgaSAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFycjsKICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0U2hvd0RhdGUodGhpcy5kYXRlKTsKICB9Cn07Cg=="},{"version":3,"sources":["DatePicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"DatePicker.vue","sourceRoot":".","sourcesContent":["<template>\n  <div class=\"date-picker\" v-click-outside>\n    <div class=\"picker-input\">\n      <span class=\"input-prefix\">\n        <i class=\"iconfont icon-date\"></i>\n      </span>\n      <input type=\"text\" :value=\"chooseDate\" />\n    </div>\n    <div class=\"picker-panel\" v-if=\"showPanel\">\n      <div class=\"picker-arrow\" />\n      <div class=\"picker-body\">\n        <div class=\"picker-header\">\n          <span class=\"picker-btn iconfont icon-prev-year\" @click=\"onChangeYear('prev')\"/>\n          <span class=\"picker-btn iconfont icon-prev-month\"  @click=\"onChangeMonth('prev')\"/>\n          <span class=\"picker-date\">{{ showDate.year }}年{{ showDate.month+1 }}月</span>\n          <span class=\"picker-btn iconfont icon-next-month\"\n          @click=\"onChangeMonth('next')\"/>\n          <span class=\"picker-btn iconfont icon-next-year\" @click=\"onChangeYear('prev')\"/>\n        </div>\n        <div class=\"picker-content\">\n          <div class=\"picker-weeks\">\n            <div v-for=\"week in ['日', '一', '二', '三', '四', '五', '六']\" :key=\"week\">{{ week }}</div>\n          </div>\n          <div class=\"picker-days\">\n            <div\n              v-for=\"date in showDay\"\n              :key=\"date.getTime()\"\n              :class=\"{'other-month':!isCur(date).month,\n              'is-select':isCur(date).select,\n              'is-today':isCur(date).today}\"\n              @click=\"onchooseClick(date)\"\n            >{{ date.getDate() }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // 自定义指令\n  directives: {\n    \"click-outside\": {\n      // 只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。\n      // el(指令所绑定的元素，可以用来直接操作DOM)---->为钩子函数的参数\n      // vnode---(Vue 编译生成的虚拟节点)\n      bind(el, binding, vnode) {\n        const vm = vnode.context;\n\n        document.onclick = function(e) {\n          const dom = e.target;\n          // console.log(dom ,el);\n\n          //contains el里面是否包含了dom 返回值Boolean值\n          const isSon = el.contains(dom);\n\n          if (isSon && !vm.showPanel) {\n            vm.changPanel(true);\n          } else if (!isSon && vm.showPanel) {\n            vm.changPanel(false);\n          }\n        };\n      }\n    }\n  },\n  //model选项\n  model:{\n    // 绑定选项特性的名字\n    prop:'dates',\n    //监听事件的名字\n    event:'choose-dates',\n\n  },\n  props: {\n    date: {\n      type: Date,\n      default: () => new Date()\n    }\n  },\n  data() {\n    return {\n      showPanel: false,\n      showDate: {\n        year: 0,\n        month: 0,\n        day: 0\n      }\n    };\n  },\n  methods: {\n    changPanel(flag) {\n      this.showPanel = flag;\n    },\n    //初始化showDate的年月日\n    getShowDate(date) {\n      const { year, month, day } = this.getYearMonthDay(date);\n\n      this.showDate = {\n        year,\n        month,\n        day\n      };\n    },\n    // 封装函数\n    getYearMonthDay(date) {\n      const year = date.getFullYear();\n      const month = date.getMonth();\n      const day = date.getDate();\n      return {\n        year,\n        month,\n        day\n      };\n    },\n    //上个月下个月天数颜色变浅\n    isCur(date) {\n      const chooseDate=new Date(this.chooseDate);\n      const{year:chooseYear,month:chooseMonth,day:chooseDay}=this.getYearMonthDay(chooseDate);\n      // 当天的年 月 日\n      const{year:curYear,month:curMonth,day:curDay}=this.getYearMonthDay(new Date());\n      // 这个月的年 月\n      const { year: showYear, month: showMonth } = this.showDate;\n      //for循环里面的年月日\n      const { year, month,day } = this.getYearMonthDay(date);\n      return {\n        month: year == showYear && month == showMonth,\n        select:year == chooseYear && month == chooseMonth && day==chooseDay,\n        today:year == curYear && month == curMonth && day==curDay,\n      };\n    },\n    // 点击日期\n    onchooseClick(date){\n      console.log(\"chooseClick----\"+date)\n      this.$emit(\"choose-dates\",dates); //自定义事件 子组件向父组件传递数据\n      this.changPanel(false);//关闭日期\n      this.getShowDate(date);\n    },\n    // 点击单箭头---切换月份\n    onChangeMonth(type){\n      const moveMonth = type ==='prev' ? -1 : 1;\n      const {year,month,day}=this.showDate;\n      const showDates=new Date(year,month,day);\n      // 利用newDate()里面的方法setMoth修改月份\n      showDates.setMonth(month+moveMonth);\n      const {year:showYear,month:showMonth}=this.getYearMonthDay(showDates);\n      this.showDate.year=showYear;\n      this.showDate.month=showMonth;\n    },\n    // 点击双箭头 ---切换年份\n    onChangeYear(type){\n      const moveyear=type=='prev'?-1:1;\n      this.showDate.year+=moveyear;\n    }\n  },\n  computed: {\n    //input框 默认显示今天\n    chooseDate() {\n      const { year, month, day } = this.getYearMonthDay(this.date);\n\n      return `${year}-${month + 1}-${day}`;\n    },\n    //显示天数（上个月，这个月，下个月）\n    showDay() {\n      const { year, month } = this.showDate;\n      const firstDay = new Date(year, month, 1);\n      const week = firstDay.getDay(); //第一天是周几\n      //上个月几号\n      const startDay = firstDay - week * 24 * 60 * 60 * 1000;\n      var arr = [];\n\n      // 一天的毫秒数 ---> 24*60*60*1000\n      for (let i = 0; i < 42; i++) {\n        //  从上个月几号开始遍历 直到42个空位完\n        arr.push(new Date(startDay + i * 24 * 60 * 60 * 1000));\n      }\n\n      return arr;\n    },\n  },\n\n  created() {\n    this.getShowDate(this.date);\n  }\n};\n</script>\n\n<style scoped>\n@import \"./assets/font.css\";\n\n.date-picker {\n  display: inline-block;\n}\n\n.picker-input {\n  position: relative;\n}\n\n.picker-input input {\n  height: 40px;\n  line-height: 40px;\n  padding: 0 30px;\n  background-color: #fff;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  outline: none;\n  cursor: pointer;\n}\n\n.picker-input .input-prefix {\n  position: absolute;\n  left: 5px;\n  width: 25px;\n  height: 100%;\n  line-height: 40px;\n  text-align: center;\n  color: #c0c4cc;\n}\n\n.picker-panel {\n  position: absolute;\n  width: 322px;\n  height: 329px;\n  margin-top: 5px;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  background-color: #fff;\n}\n\n.picker-panel .picker-arrow {\n  position: absolute;\n  top: -12px;\n  left: 30px;\n  width: 0;\n  height: 0;\n  border: 6px solid transparent;\n  border-bottom-color: #ebeef5;\n}\n\n.picker-panel .picker-arrow::after {\n  position: absolute;\n  left: -6px;\n  top: 1px;\n  content: \"\";\n  display: block;\n  width: 0;\n  height: 0;\n  border: 6px solid transparent;\n  border-bottom-color: #fff;\n  border-top-width: 0;\n}\n\n.picker-panel .picker-body {\n}\n\n.picker-panel .picker-header {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 15px;\n  padding-bottom: 10px;\n}\n.picker-panel .picker-btn {\n  margin-right: 5px;\n  margin-left: 5px;\n  font-size: 12px;\n  color: #303133;\n  cursor: pointer;\n}\n\n.picker-panel .picker-date {\n  margin-left: 60px;\n  margin-right: 60px;\n  font-size: 14px;\n  user-select: none;\n}\n\n.picker-panel .picker-content {\n  padding: 0 10px 10px 10px;\n  color: #606266;\n  user-select: none;\n}\n\n.picker-panel .picker-weeks {\n  display: flex;\n  justify-content: space-around;\n  height: 40px;\n  line-height: 40px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.picker-panel .picker-days {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.picker-panel .picker-days div {\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n  text-align: center;\n  margin: 4px 6px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.picker-panel .picker-days div:hover {\n  color: #409eff;\n}\n\n.picker-panel .picker-days div.is-today {\n  color: #409eff;\n  font-weight: 700;\n}\n\n.picker-panel .picker-days div.is-select {\n  border-radius: 50%;\n  background-color: #409eff;\n  color: #fff;\n}\n\n.picker-panel .picker-days div.other-month {\n  color: #c0c4cc;\n}\n</style>"]}]}